const customersSelectors = {
  loginPage: document.querySelector('.login-page'),
  resetPasswordTrigger: document.querySelector('[href="#recover"]'),
  recoverPasswordForm: document.querySelector('#RecoverPasswordForm'),
  customerLoginForm: document.querySelector('#CustomerLoginForm'),
  recoverPasswordFormCancel: document.querySelector('[href="#cancel"]'),
  recoverSuccess: document.querySelector('#ResetSuccess'),
  newAddressTrigger: document.querySelector('.address-new-toggle'),
  newAddessForm: document.querySelector('#AddressNewForm'),
  editAddessFormToggle: document.querySelectorAll('.address-edit-form-toggle'),
  editAddessFormCancel: document.querySelectorAll('.address-edit-form-cancel')
};

const toggleLoginForms = () => {
  customersSelectors.customerLoginForm.classList.toggle('dn');
  customersSelectors.recoverPasswordForm.classList.toggle('dn');
};

const toggleNewAddressForm = () => {
  customersSelectors.newAddessForm.classList.toggle('dn');
};

const toggleEditAddressForm = e => {
  e.preventDefault();
  let thisForm = `#${e.target.dataset.editForm}`;
  console.log(thisForm);
  document.querySelector(thisForm).classList.toggle('dn');
};

document.addEventListener('DOMContentLoaded', () => {
  if (window.location.hash.includes('#recover')) {
    toggleLoginForms();
  }

  if (window.location.hash.includes('#success')) {
    customersSelectors.recoverSuccess.classList.remove('dn');
  }

  if (customersSelectors.loginPage != null) {
    customersSelectors.loginPage.classList.add('loaded');
  }
});

if (customersSelectors.resetPasswordTrigger != null) {
  customersSelectors.resetPasswordTrigger.addEventListener('click', () => {
    toggleLoginForms();
  });
}

if (customersSelectors.recoverPasswordFormCancel !== null) {
  customersSelectors.recoverPasswordFormCancel.addEventListener('click', () => {
    toggleLoginForms();
  });
}

if (customersSelectors.newAddressTrigger !== null) {
  customersSelectors.newAddressTrigger.addEventListener('click', () => {
    toggleNewAddressForm();
  });
}

if (customersSelectors.editAddessFormToggle !== null) {
  customersSelectors.editAddessFormToggle.forEach(toggleButton => {
    toggleButton.addEventListener('click', e => {
      toggleEditAddressForm(e);
    });
  });
}

if (customersSelectors.editAddessFormCancel !== null) {
  customersSelectors.editAddessFormCancel.forEach(toggleButton => {
    toggleButton.addEventListener('click', e => {
      window.scrollTo(0, 0);
      toggleEditAddressForm(e);
    });
  });
}